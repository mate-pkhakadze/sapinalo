{% extends "base.html" %}
{% block title %}Edit {{ tank.name }}{% endblock %}

{% block content %}
<div class="card card-dark p-4">
    <h3 class="mb-3">Edit Tank</h3>

    <!-- === EDIT FORM (FILE UPLOAD FIXED) === -->
    <form method="POST" enctype="multipart/form-data">
        {{ form.hidden_tag() }}

        {% for field in form if field.name not in ["csrf_token", "submit"] %}
            <div class="form-group mb-3">
                {{ field.label }}

                {% if field.type == "FileField" %}
                    {{ field(class="form-control-file") }}
                {% else %}
                    {{ field(class="form-control") }}
                {% endif %}

                {% for error in field.errors %}
                    <small class="text-danger">{{ error }}</small>
                {% endfor %}
            </div>
        {% endfor %}

        <button class="btn btn-primary">Save Changes</button>
    </form>

    <!-- === DELETE FORM === -->
    <form method="POST"
          action="{{ url_for('tanks.delete_tank', slug=tank.slug) }}"
          class="mt-3"
          onsubmit="return confirm('Delete this tank?');">
        <button class="btn btn-danger">Delete Tank</button>
    </form>
</div>
{% endblock %}